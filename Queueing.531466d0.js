!function(e,t,l,a,u){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n="function"==typeof o[a]&&o[a],g=n.cache||{},r="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,l){if(!g[t]){if(!e[t]){var u="function"==typeof o[a]&&o[a];if(!l&&u)return u(t,!0);if(n)return n(t,!0);if(r&&"string"==typeof t)return r(t);var I=new Error("Cannot find module '"+t+"'");throw I.code="MODULE_NOT_FOUND",I}c.resolve=function(l){var a=e[t][1][l];return null!=a?a:l},c.cache={};var C=g[t]=new d.Module(t);e[t][0].call(C.exports,c,C,C.exports,this)}return g[t].exports;function c(e){var t=c.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=g,d.parent=n,d.register=function(t,l){e[t]=[function(e,t){t.exports=l},{}]},Object.defineProperty(d,"root",{get:function(){return o[a]}}),o[a]=d;for(var I=0;I<t.length;I++)d(t[I])}({kXt1f:[function(e,t,l){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(l);var u=e("@mui/material/Typography"),o=a.interopDefault(u),n=e("react"),g=a.interopDefault(n),r=e("@mui/material/styles"),d=e("../../components/code/CodePreview"),I=a.interopDefault(d),C=e("../../CodeSamples/QueueDemo"),c=a.interopDefault(C),i=e("../../components/layouts/PageWithContent"),s=a.interopDefault(i),A=e("../../navigationData/pages");l.default=function(){const e=(0,r.useTheme)();return g.default.createElement(s.default,{title:"Queueing state updates",content:g.default.createElement(g.default.Fragment,null,g.default.createElement(o.default,{variant:"body1"},"This hook works by queueing all your state updates at a global level. That is how it is able to process the state updates one by one. This section explains how you can queue state updates and determine the output of the hook without running into unexpected bugs."),g.default.createElement("section",{style:{marginTop:e.spacing(4)}},g.default.createElement(o.default,{gutterBottom:!0,variant:"h5",fontWeight:"bold",component:"h2"},"Entering and leaving the queue"),g.default.createElement("article",null,g.default.createElement(o.default,{variant:"body1",gutterBottom:!0},"To add a state update to queue, you set a ",g.default.createElement("code",null,"truthy")," state value. To remove a state update from queue, you set a ",g.default.createElement("code",null,"falsy")," state value. This process works on two levels - global level and the hook level. You can also replace the ",g.default.createElement("code",null,"truthy")," & ",g.default.createElement("code",null,"falsy")," check with your own custom check."),g.default.createElement(I.default,{sourceCode:C.SourceCode},g.default.createElement(c.default,null)),g.default.createElement("section",null,g.default.createElement(o.default,{variant:"h6",component:"h3",gutterBottom:!0},"Global level"),g.default.createElement("ol",null,g.default.createElement("li",null,"When state transitions from a ",g.default.createElement("code",null,"falsy")," to a ",g.default.createElement("code",null,"truthy"),", a unique ID is added the to global queue. This is to keep track of your transition request from a ",g.default.createElement("code",null,"falsy")," state to a ",g.default.createElement("code",null,"truthy")," state."),g.default.createElement("li",null,"Whenever the queue changes, front of queue is calculated. The hook that requested this transition is given a go ahead to set a ",g.default.createElement("code",null,"truthy")," value. All the other transitions everywhere else are blocked on hook level."),g.default.createElement("li",null,"When the hook transitions to a ",g.default.createElement("code",null,"falsy")," value, its ID is removed from the queue and next entry comes to the front"),g.default.createElement("li",null,"It is important to remember that generated ID tracks the transition between ",g.default.createElement("code",null,"truthy"),"and ",g.default.createElement("code",null,"falsy"),". So changing from a ",g.default.createElement("code",null,"truthy")," value to another ",g.default.createElement("code",null,"truthy")," ","value will have no effect in the queue. Same applies for ",g.default.createElement("code",null,"falsy")," values."," "))),g.default.createElement("section",null,g.default.createElement(o.default,{variant:"h6",component:"h3",gutterBottom:!0,sx:{marginTop:e=>e.spacing(1)}},"Hook level"),g.default.createElement("ol",null,g.default.createElement("li",null,"The hook has maintains two values. First one is the current state value. This value is updated normally with ",g.default.createElement("code",null,"setState")," calls and is available as the third return value of the hook. The second one is a cached value that we call ",g.default.createElement("code",null,"oldStateValue"),". This is the latest"," ",g.default.createElement("code",null,"falsy")," value passed to the hook."),g.default.createElement("li",null,"What is returned from the hook depends on the global queue. If the hook's transition request is at the front of the queue, current state is returned. Otherwise we return the cached"," ",g.default.createElement("code",null,"falsy")," value."))))),g.default.createElement("section",{style:{marginTop:e.spacing(4)}},g.default.createElement(o.default,{gutterBottom:!0,variant:"h5",fontWeight:"bold",component:"h1"},"Edge cases"),g.default.createElement("article",null,g.default.createElement(o.default,{variant:"body1"},"Now we cover some edge cases with queueing so as to provider a better idea your updates are handled."),g.default.createElement("ol",null,g.default.createElement("li",null,"If the hook has a ",g.default.createElement("code",null,"truthy")," initial value, then the entry is made to the queue as soon as the hook mounts. This is done as it is natural to want this initial value to block other transitions across the app. ",g.default.createElement("code",null,"oldStateValue")," is set to the initial value by default. So even when it is not this hook's turn at the front of the queue, it will still return that truthy value. Avoid passing ",g.default.createElement("code",null,"truthy")," initial value to avoid bugs."),g.default.createElement("li",null,"If the state value is set to ",g.default.createElement("code",null,"falsy"),", return value is immediately updated to this value. If you set a series of ",g.default.createElement("code",null,"falsy")," values one after the another, those will be reflected at the same time in return value."),g.default.createElement("li",null,"If the ID is at the front of queue (current state must be ",g.default.createElement("code",null,"truthy"),") and you update the state to another truthy value, return value is immediately updated to the new value. If you set a series of ",g.default.createElement("code",null,"truthy")," values one after the another, those will be reflected at the same time in return value."),g.default.createElement("li",null,"If the ID is not at the front of queue but current state is ",g.default.createElement("code",null,"truthy"),","," ",g.default.createElement("code",null,"oldStateValue")," is returned. Even if you keep on updating to other ",g.default.createElement("code",null,"truthy")," ","values, the ",g.default.createElement("code",null,"last falsy value")," will be returned. When the ID goes to the front of the queue, the latest truthy value will be returned"),g.default.createElement("li",null,"If the ID is in queue and the component unmounts, ID is removed from the queue."))))),previousLink:A.Pages.MainConcepts.Index,nextLink:A.Pages.MainConcepts.Priority})}},{"@mui/material/Typography":"cEgDo",react:"6uln9","@mui/material/styles":"dP6PR","../../components/code/CodePreview":"fBsfj","../../CodeSamples/QueueDemo":"aoEzu","../../components/layouts/PageWithContent":"203rO","../../navigationData/pages":"jcctD","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],aoEzu:[function(e,t,l){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(l),a.export(l,"default",(()=>o.default)),a.export(l,"SourceCode",(()=>u.__sourceCode)),a.export(l,"__sourceCode",(()=>n));var u=e("./QueueDemo"),o=a.interopDefault(u);const n="ZXhwb3J0IHsgZGVmYXVsdCwgX19zb3VyY2VDb2RlIGFzIFNvdXJjZUNvZGUgfSBmcm9tICIuL1F1ZXVlRGVtbyI7CgpkZWNsYXJlIG1vZHVsZSAiLi9RdWV1ZURlbW8iIHsKICBleHBvcnQgY29uc3QgX19zb3VyY2VDb2RlOiBzdHJpbmc7Cn0K"},{"./QueueDemo":"eqkot","@parcel/transformer-js/src/esmodule-helpers.js":"7baQq"}],eqkot:[function(e,t,l){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(l),a.export(l,"__sourceCode",(()=>m));var u=e("react"),o=a.interopDefault(u),n=e("@mui/material/Box"),g=a.interopDefault(n),r=e("@mui/material/Checkbox"),d=a.interopDefault(r),I=e("@mui/material/FormGroup"),C=a.interopDefault(I),c=e("@mui/material/FormControlLabel"),i=a.interopDefault(c),s=e("../../../src"),A=e("@mui/material");l.default=function(){const[e,t]=(0,s.useSyncedState)(!1),[l,a]=(0,s.useSyncedState)(!1),[n,r]=(0,s.useSyncedState)(!1),[I,c]=(0,u.useState)(!1),[m,f]=(0,u.useState)(!1),[h,b]=(0,u.useState)(!1),[Z,v]=(0,u.useState)([]),p=(0,u.useCallback)(((e,t)=>{v(t?t=>t.includes(e)?t:[...t,e]:t=>t.filter((t=>t!==e)))}),[]);return o.default.createElement(g.default,{display:"flex",alignItems:"center",flex:1,justifyContent:"space-around",sx:{flexDirection:{xs:"column",md:"row"}}},o.default.createElement(g.default,null,o.default.createElement(A.Typography,{variant:"h3",component:"p"},"Queue: [",Z.join(", "),"]")),o.default.createElement(g.default,null,o.default.createElement(C.default,null,o.default.createElement(i.default,{label:"State 1",control:o.default.createElement(o.default.Fragment,null,o.default.createElement(d.default,{checked:I,onChange:e=>{t(e.target.checked),c(e.target.checked),p(1,e.target.checked)}}))}),o.default.createElement(i.default,{label:"State 2",control:o.default.createElement(d.default,{checked:m,onChange:e=>{a(e.target.checked),f(e.target.checked),p(2,e.target.checked)}})}),o.default.createElement(i.default,{label:"State 3",control:o.default.createElement(d.default,{checked:h,onChange:e=>{r(e.target.checked),b(e.target.checked),p(3,e.target.checked)}})}))),o.default.createElement(g.default,null,o.default.createElement(C.default,null,o.default.createElement(i.default,{label:"Synced State 1",control:o.default.createElement(d.default,{disabled:!0,checked:e})}),o.default.createElement(i.default,{label:"Synced State 2",control:o.default.createElement(d.default,{disabled:!0,checked:l})}),o.default.createElement(i.default,{label:"Synced State 3",control:o.default.createElement(d.default,{disabled:!0,checked:n})}))))};const m="aW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gInJlYWN0IjsKaW1wb3J0IEJveCBmcm9tICJAbXVpL21hdGVyaWFsL0JveCI7CmltcG9ydCBDaGVja2JveCBmcm9tICJAbXVpL21hdGVyaWFsL0NoZWNrYm94IjsKaW1wb3J0IEZvcm1Hcm91cCBmcm9tICJAbXVpL21hdGVyaWFsL0Zvcm1Hcm91cCI7CmltcG9ydCBGb3JtQ29udHJvbExhYmVsIGZyb20gIkBtdWkvbWF0ZXJpYWwvRm9ybUNvbnRyb2xMYWJlbCI7CmltcG9ydCB7IHVzZVN5bmNlZFN0YXRlIH0gZnJvbSAicmVhY3Qtc3luY2VkLXN0YXRlIjsKaW1wb3J0IHsgVHlwb2dyYXBoeSB9IGZyb20gIkBtdWkvbWF0ZXJpYWwiOwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUXVldWVEZW1vKCkgewogIGNvbnN0IFtzeW5jZWRTdGF0ZTEsIHNldFN5bmNlZFN0YXRlMV0gPSB1c2VTeW5jZWRTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3N5bmNlZFN0YXRlMiwgc2V0U3luY2VkU3RhdGUyXSA9IHVzZVN5bmNlZFN0YXRlKGZhbHNlKTsKICBjb25zdCBbc3luY2VkU3RhdGUzLCBzZXRTeW5jZWRTdGF0ZTNdID0gdXNlU3luY2VkU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtzdGF0ZTEsIHNldFN0YXRlMV0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3N0YXRlMiwgc2V0U3RhdGUyXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbc3RhdGUzLCBzZXRTdGF0ZTNdID0gdXNlU3RhdGUoZmFsc2UpOwoKICBjb25zdCBbcXVldWUsIHNldFF1ZXVlXSA9IHVzZVN0YXRlPG51bWJlcltdPihbXSk7CgogIGNvbnN0IG1hbmFnZVF1ZXVlID0gdXNlQ2FsbGJhY2soKGVudHJ5OiBudW1iZXIsIGVudGVyOiBib29sZWFuKSA9PiB7CiAgICBpZiAoZW50ZXIpIHsKICAgICAgc2V0UXVldWUoKHEpID0+IChxLmluY2x1ZGVzKGVudHJ5KSA/IHEgOiBbLi4ucSwgZW50cnldKSk7CiAgICB9IGVsc2UgewogICAgICBzZXRRdWV1ZSgocSkgPT4gcS5maWx0ZXIoKGUpID0+IGUgIT09IGVudHJ5KSk7CiAgICB9CiAgfSwgW10pOwoKICByZXR1cm4gKAogICAgPEJveAogICAgICBkaXNwbGF5PXsiZmxleCJ9CiAgICAgIGFsaWduSXRlbXM9eyJjZW50ZXIifQogICAgICBmbGV4PXsxfQogICAgICBqdXN0aWZ5Q29udGVudD17InNwYWNlLWFyb3VuZCJ9CiAgICAgIHN4PXt7CiAgICAgICAgZmxleERpcmVjdGlvbjogewogICAgICAgICAgeHM6ICJjb2x1bW4iLAogICAgICAgICAgbWQ6ICJyb3ciLAogICAgICAgIH0sCiAgICAgIH19CiAgICA+CiAgICAgIDxCb3g+CiAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD17ImgzIn0gY29tcG9uZW50PXsicCJ9PgogICAgICAgICAgUXVldWU6IFt7cXVldWUuam9pbigiLCAiKX1dCiAgICAgICAgPC9UeXBvZ3JhcGh5PgogICAgICA8L0JveD4KICAgICAgPEJveD4KICAgICAgICA8Rm9ybUdyb3VwPgogICAgICAgICAgPEZvcm1Db250cm9sTGFiZWwKICAgICAgICAgICAgbGFiZWw9e2BTdGF0ZSAxYH0KICAgICAgICAgICAgY29udHJvbD17CiAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgIDxDaGVja2JveAogICAgICAgICAgICAgICAgICBjaGVja2VkPXtzdGF0ZTF9CiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIHNldFN5bmNlZFN0YXRlMShlLnRhcmdldC5jaGVja2VkKTsKICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZTEoZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICAgICAgbWFuYWdlUXVldWUoMSwgZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgIDwvPgogICAgICAgICAgICB9CiAgICAgICAgICAvPgogICAgICAgICAgPEZvcm1Db250cm9sTGFiZWwKICAgICAgICAgICAgbGFiZWw9e2BTdGF0ZSAyYH0KICAgICAgICAgICAgY29udHJvbD17CiAgICAgICAgICAgICAgPENoZWNrYm94CiAgICAgICAgICAgICAgICBjaGVja2VkPXtzdGF0ZTJ9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHsKICAgICAgICAgICAgICAgICAgc2V0U3luY2VkU3RhdGUyKGUudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgICAgICAgICAgICBzZXRTdGF0ZTIoZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICAgIG1hbmFnZVF1ZXVlKDIsIGUudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAvPgogICAgICAgICAgICB9CiAgICAgICAgICAvPgogICAgICAgICAgPEZvcm1Db250cm9sTGFiZWwKICAgICAgICAgICAgbGFiZWw9e2BTdGF0ZSAzYH0KICAgICAgICAgICAgY29udHJvbD17CiAgICAgICAgICAgICAgPENoZWNrYm94CiAgICAgICAgICAgICAgICBjaGVja2VkPXtzdGF0ZTN9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHsKICAgICAgICAgICAgICAgICAgc2V0U3luY2VkU3RhdGUzKGUudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgICAgICAgICAgICBzZXRTdGF0ZTMoZS50YXJnZXQuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICAgIG1hbmFnZVF1ZXVlKDMsIGUudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAvPgogICAgICAgICAgICB9CiAgICAgICAgICAvPgogICAgICAgIDwvRm9ybUdyb3VwPgogICAgICA8L0JveD4KICAgICAgPEJveD4KICAgICAgICA8Rm9ybUdyb3VwPgogICAgICAgICAgPEZvcm1Db250cm9sTGFiZWwgbGFiZWw9e2BTeW5jZWQgU3RhdGUgMWB9IGNvbnRyb2w9ezxDaGVja2JveCBkaXNhYmxlZCBjaGVja2VkPXtzeW5jZWRTdGF0ZTF9IC8+fSAvPgogICAgICAgICAgPEZvcm1Db250cm9sTGFiZWwgbGFiZWw9e2BTeW5jZWQgU3RhdGUgMmB9IGNvbnRyb2w9ezxDaGVja2JveCBkaXNhYmxlZCBjaGVja2VkPXtzeW5jZWRTdGF0ZTJ9IC8+fSAvPgogICAgICAgICAgPEZvcm1Db250cm9sTGFiZWwgbGFiZWw9e2BTeW5jZWQgU3RhdGUgM2B9IGNvbnRyb2w9ezxDaGVja2JveCBkaXNhYmxlZCBjaGVja2VkPXtzeW5jZWRTdGF0ZTN9IC8+fSAvPgogICAgICAgIDwvRm9ybUdyb3VwPgogICAgICA8L0JveD4KICAgIDwvQm94PgogICk7Cn0K"},{react:"6uln9","@mui/material/Box":"9r3IO","@mui/material/Checkbox":"60Zyc","@mui/material/FormGroup":"4g1ZM","@mui/material/FormControlLabel":"K2vq7","../../../src":"4zTVb","@mui/material":"9ImQh","@parcel/transformer-js/src/esmodule-helpers.js":"7baQq"}]},[],0,"parcelRequired94c");
//# sourceMappingURL=Queueing.531466d0.js.map
